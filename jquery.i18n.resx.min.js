!function($){function callbackIfComplete(a){a.debug&&(debug("callbackIfComplete()"),debug("totalFiles: "+a.totalFiles),debug("filesLoaded: "+a.filesLoaded)),a.async&&a.filesLoaded===a.totalFiles&&a.callback&&a.callback()}function loadXML(a){var b=null;try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)}catch(c){try{parser=new DOMParser,b=parser.parseFromString(a,"text/xml")}catch(c){}}return b}function loadAndParseFiles(a,b){b.debug&&debug("loadAndParseFiles"),null!==a&&a.length>0?loadAndParseFile(a[0],b,function(){a.shift(),loadAndParseFiles(a,b)}):callbackIfComplete(b)}function loadAndParseFile(a,b,c){b.debug&&(debug("loadAndParseFile('"+a+"')"),debug("totalFiles: "+b.totalFiles),debug("filesLoaded: "+b.filesLoaded)),null!==a&&"undefined"!=typeof a&&$.ajax({url:a,async:b.async,cache:b.cache,dataType:"text",success:function(d){b.debug&&(debug("Succeeded in downloading "+a+"."),debug(d)),parseData(d,b),c()},error:function(d,e,f){b.debug&&debug("Failed to download or parse "+a+". errorThrown: "+f),404===d.status&&(b.totalFiles-=1),c()}})}function parseData(data,settings){var i,l,item,name,value,unicodeMatches,parts,first,fnArgs,usedArgs,fnExpr,xmlDoc=loadXML(data),items=xmlDoc.getElementsByTagName("data"),parsed="",regPlaceHolder=/(\{\d+})/g,regRepPlaceHolder=/\{(\d+)}/g,regEscapeCharacters=/"|\t|\r|\n|\f/g,unicodeRE=/(\\u.{4})/gi;for(i=0,l=items.length;l>i;i++)item=items[i],name=item.attributes["name"].value,value=item.textContent.trim(),("map"===settings.mode||"both"===settings.mode)&&(unicodeMatches=value.match(unicodeRE),unicodeMatches&&unicodeMatches.forEach(function(a){value=value.replace(a,unescapeUnicode(a))}),settings.namespace?$.i18n.map[settings.namespace][name]=value:$.i18n.map[name]=value),("vars"===settings.mode||"both"===settings.mode)&&(value=value.replace(regEscapeCharacters,function(a){return'"'===a?'\\"':"	"===a?"\\t":"\r"===a?"\\r":"\n"===a?"\\n":"\f"===a?"\\f":void 0}),checkKeyNamespace(name),regPlaceHolder.test(value)?(parts=value.split(regPlaceHolder),first=!0,fnArgs="",usedArgs=[],parts.forEach(function(a){!regPlaceHolder.test(a)||0!==usedArgs.length&&-1!==usedArgs.indexOf(a)||(first||(fnArgs+=","),fnArgs+=a.replace(regRepPlaceHolder,"v$1"),usedArgs.push(a),first=!1)}),parsed+=name+"=function("+fnArgs+"){",fnExpr='"'+value.replace(regRepPlaceHolder,'"+v$1+"')+'"',parsed+="return "+fnExpr+";"+"};"):parsed+=name+'="'+value+'";');eval(parsed),settings.filesLoaded+=1}function checkKeyNamespace(key){var fullname,names,i,j,name,regDot=/\./;if(regDot.test(key))for(fullname="",names=key.split(/\./),i=0,j=names.length;j>i;i++)name=names[i],i>0&&(fullname+="."),fullname+=name,eval("typeof "+fullname+' === "undefined"')&&eval(fullname+"={};")}function unescapeUnicode(a){var b=[],c=parseInt(a.substr(2),16);return c>=0&&c<Math.pow(2,16)&&b.push(c),b.reduce(function(a,b){return a+String.fromCharCode(b)},"")}$.i18n={},$.i18n.map={};var debug=function(a){window.console&&console.log("i18n::"+a)};$.i18n.resx=function(a){var c,b={name:"Messages",language:"",path:"",namespace:null,mode:"vars",cache:!0,debug:!1,encoding:"UTF-8",async:!1,callback:null};a=$.extend(b,a),a.namespace&&"string"==typeof a.namespace&&(a.namespace.match(/^[a-z]*$/)?$.i18n.map[a.namespace]={}:(debug("Namespaces can only be lower case letters, a - z"),a.namespace=null)),a.path.match(/\/$/)||(a.path+="/"),a.language=this.normaliseLanguageCode(a),c=a.name&&a.name.constructor===Array?a.name:[a.name],a.totalFiles=2*c.length+(a.language.length>=5?c.length:0),a.debug&&debug("totalFiles: "+a.totalFiles),a.filesLoaded=0,c.forEach(function(b){var e,f,h,c=a.path+b+".resx",g=a.language.substring(0,2),d=a.path+b+"."+g+".resx";a.language.length>=5?(h=a.language.substring(0,5),e=a.path+b+"."+h+".resx",f=[c,d,e]):f=[c,d],loadAndParseFiles(f,a)}),a.callback&&!a.async&&a.callback()},$.i18n.res=function(a){var c,d,e,f,g,i,j,h,k,l,b=[].slice.call(arguments);if(2===b.length&&($.isArray(b[1])?c=b[1]:"object"==typeof b[1]&&(d=b[1].namespace,e=b[1].replacements,b.splice(-1,1),e&&Array.prototype.push.apply(b,e))),f=d?$.i18n.map[d][a]:$.i18n.map[a],"undefined"==typeof f)return d?d+"#"+a:a;if("string"==typeof f){for(h=[],g=0;g<f.length;)"{"===f.charAt(g)?(i=f.indexOf("}",g+1),-1===i?g++:(j=parseInt(f.substring(g+1,i)),!isNaN(j)&&j>=0?(k=f.substring(0,g),""!==k&&h.push(k),h.push(j),g=0,f=f.substring(i+1)):g=i+1)):g++;""!==f&&h.push(f),f=h,d?$.i18n.map[settings.namespace][a]=h:$.i18n.map[a]=h}if(0===f.length)return"";if(1===f.length&&"string"==typeof f[0])return f[0];for(l="",g=0,i=f.length;i>g;g++)l+="string"==typeof f[g]?f[g]:c&&f[g]<c.length?c[f[g]]:!c&&f[g]+1<b.length?b[f[g]+1]:"{"+f[g]+"}";return l},$.i18n.normaliseLanguageCode=function(a){var b=a.language;return(!b||b.length<2)&&(a.debug&&debug("No language supplied. Pulling it from the browser ..."),b=navigator.languages&&navigator.languages.length>0?navigator.languages[0]:navigator.language||navigator.userLanguage||"en",a.debug&&debug("Language from browser: "+b)),b=b.toLowerCase(),b=b.replace(/_/,"-"),b.length>3&&(b=b.substring(0,3)+b.substring(3).toUpperCase()),b}}(jQuery);